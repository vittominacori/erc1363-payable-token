<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ERC-1363 Payable Token | Reference implementation</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/erc1363-payable-token/favicon.ico">
    <meta name="description" content="ERC-1363 is an extension interface for ERC-20 tokens that supports executing code on a recipient contract after transfers, or code on a spender contract after approvals, in a single transaction.">
    <meta name="title" property="og:title" content="ERC-1363 Payable Token | Reference implementation">
    <meta name="image" property="og:image" content="https://vittominacori.github.io/erc1363-payable-token/assets/images/erc1363-payable-token.jpg">
    <meta property="og:title" content="ERC-1363 Payable Token | Reference implementation">
    <meta property="og:description" content="ERC-1363 is an extension interface for ERC-20 tokens that supports executing code on a recipient contract after transfers, or code on a spender contract after approvals, in a single transaction.">
    <meta property="og:image" content="https://vittominacori.github.io/erc1363-payable-token/assets/images/erc1363-payable-token.jpg">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vittominacori.github.io/erc1363-payable-token">
    <meta property="twitter:title" content="ERC-1363 Payable Token | Reference implementation">
    <meta property="twitter:description" content="ERC-1363 is an extension interface for ERC-20 tokens that supports executing code on a recipient contract after transfers, or code on a spender contract after approvals, in a single transaction.">
    <meta property="twitter:image" content="https://vittominacori.github.io/erc1363-payable-token/assets/images/erc1363-payable-token.jpg">
    <meta property="twitter:card" content="summary_large_image">
    
    <link rel="preload" href="/erc1363-payable-token/assets/css/0.styles.5328e824.css" as="style"><link rel="preload" href="/erc1363-payable-token/assets/js/app.c808356c.js" as="script"><link rel="preload" href="/erc1363-payable-token/assets/js/2.4708ce91.js" as="script"><link rel="preload" href="/erc1363-payable-token/assets/js/1.eab45b48.js" as="script"><link rel="preload" href="/erc1363-payable-token/assets/js/22.7a7383be.js" as="script"><link rel="prefetch" href="/erc1363-payable-token/assets/js/10.90f781e3.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/11.59b0ce91.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/12.20ddcd7b.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/13.aef39b4e.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/14.80eab52a.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/15.cc7ff0dd.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/16.a93d4243.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/17.7723a6d8.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/18.0524eb80.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/19.eb35cfee.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/20.c11ec329.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/21.8b16bd32.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/3.442d651c.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/4.84e1e480.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/5.f0541060.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/6.dfb06aa0.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/7.7551a9fb.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/erc1363-payable-token/assets/css/0.styles.5328e824.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/erc1363-payable-token/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">Reference implementation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/vittominacori/erc1363-payable-token" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/vittominacori/erc1363-payable-token" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ERC-1363 Payable Token</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/erc1363-payable-token/#install" class="sidebar-link">Install</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#usage" class="sidebar-link">Usage</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#code" class="sidebar-link">Code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#ierc1363" class="sidebar-link">IERC1363</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#ierc1363receiver" class="sidebar-link">IERC1363Receiver</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#ierc1363spender" class="sidebar-link">IERC1363Spender</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#ierc1363errors" class="sidebar-link">IERC1363Errors</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#erc1363" class="sidebar-link">ERC1363</a></li></ul></li><li><a href="/erc1363-payable-token/#examples" class="sidebar-link">Examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#erc1363guardian" class="sidebar-link">ERC1363Guardian</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#erc1363methodcallreceiver" class="sidebar-link">ERC1363MethodCallReceiver</a></li></ul></li><li><a href="/erc1363-payable-token/#documentation" class="sidebar-link">Documentation</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#code-analysis" class="sidebar-link">Code Analysis</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#development" class="sidebar-link">Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#install-dependencies" class="sidebar-link">Install dependencies</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#compile" class="sidebar-link">Compile</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#test" class="sidebar-link">Test</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#code-coverage" class="sidebar-link">Code Coverage</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#linter" class="sidebar-link">Linter</a></li></ul></li><li><a href="/erc1363-payable-token/#license" class="sidebar-link">License</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="erc-1363-payable-token"><a href="#erc-1363-payable-token" class="header-anchor">#</a> ERC-1363 Payable Token</h1> <p><a href="https://www.npmjs.org/package/erc-payable-token" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/erc-payable-token.svg?style=flat-square" alt="NPM Package"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/vittominacori/erc1363-payable-token/actions/workflows/ci.yml" target="_blank" rel="noopener noreferrer"><img src="https://github.com/vittominacori/erc1363-payable-token/actions/workflows/ci.yml/badge.svg" alt="CI"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://codecov.io/gh/vittominacori/erc1363-payable-token" target="_blank" rel="noopener noreferrer"><img src="https://codecov.io/gh/vittominacori/erc1363-payable-token/graph/badge.svg" alt="Coverage Status"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/LICENSE" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/license/vittominacori/erc1363-payable-token.svg" alt="MIT licensed"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr> <p><a href="https://eips.ethereum.org/EIPS/eip-1363" target="_blank" rel="noopener noreferrer">ERC-1363<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is an extension interface for ERC-20 tokens that supports executing code on a recipient contract after <code>transfer</code> or <code>transferFrom</code>, or code on a spender contract after <code>approve</code>, in a single transaction.</p> <p>There is no way to execute code on a receiver/spender contract after ERC-20 transfers or approvals so, to perform an action, it is required to send another transaction.
This introduces complexity in UI development and friction on adoption as users must wait for the first transaction to be executed and then submit the second one. They must also pay GAS twice.</p> <p>ERC-1363 makes tokens capable of performing actions more easily and working without the use of any off-chain listener.
It allows to make a callback on receiver/spender contracts, after transfers or approvals, in a single transaction.</p> <p>The following are functions and callbacks introduced by ERC-1363:</p> <ul><li><code>transferAndCall</code> and <code>transferFromAndCall</code> will call an <code>onTransferReceived</code> on a <code>ERC1363Receiver</code> contract.</li> <li><code>approveAndCall</code> will call an <code>onApprovalReceived</code> on a <code>ERC1363Spender</code> contract.</li></ul> <p>ERC-1363 tokens can be used for specific utilities in all cases that require a callback to be executed after a transfer or an approval received.
ERC-1363 is also useful for avoiding token loss or token locking in contracts by verifying the recipient contract's ability to handle tokens.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p><strong>This repo contains the reference implementation of the official <a href="https://eips.ethereum.org/EIPS/eip-1363" target="_blank" rel="noopener noreferrer">ERC-1363<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</strong></p></div> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> erc-payable-token
</code></pre></div><h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.20</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>ERC1363<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;erc-payable-token/contracts/token/ERC1363/ERC1363.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">MyToken</span> <span class="token keyword">is</span> ERC1363 <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> name<span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token keyword">memory</span> symbol<span class="token punctuation">)</span> <span class="token function">ERC20</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// your stuff</span>
    <span class="token punctuation">}</span>

  <span class="token comment">// your stuff</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="code"><a href="#code" class="header-anchor">#</a> Code</h2> <h3 id="ierc1363"><a href="#ierc1363" class="header-anchor">#</a> IERC1363</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/IERC1363.sol" target="_blank" rel="noopener noreferrer">IERC1363.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Interface of the ERC-1363 standard as defined in the <a href="https://eips.ethereum.org/EIPS/eip-1363" target="_blank" rel="noopener noreferrer">ERC-1363<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">interface</span> <span class="token class-name">IERC1363</span> <span class="token keyword">is</span> IERC20<span class="token punctuation">,</span> IERC165 <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">transferAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">transferAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">transferFromAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">from</span><span class="token punctuation">,</span> <span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">transferFromAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">from</span><span class="token punctuation">,</span> <span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">approveAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> spender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">approveAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> spender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ierc1363receiver"><a href="#ierc1363receiver" class="header-anchor">#</a> IERC1363Receiver</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/IERC1363Receiver.sol" target="_blank" rel="noopener noreferrer">IERC1363Receiver.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Interface for any contract that wants to support <code>transferAndCall</code> or <code>transferFromAndCall</code> from ERC-1363 token contracts.</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">interface</span> <span class="token class-name">IERC1363Receiver</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">onTransferReceived</span><span class="token punctuation">(</span><span class="token builtin">address</span> spender<span class="token punctuation">,</span> <span class="token builtin">address</span> sender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ierc1363spender"><a href="#ierc1363spender" class="header-anchor">#</a> IERC1363Spender</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/IERC1363Spender.sol" target="_blank" rel="noopener noreferrer">IERC1363Spender.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Interface for any contract that wants to support <code>approveAndCall</code> from ERC-1363 token contracts.</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">interface</span> <span class="token class-name">IERC1363Spender</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">onApprovalReceived</span><span class="token punctuation">(</span><span class="token builtin">address</span> sender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ierc1363errors"><a href="#ierc1363errors" class="header-anchor">#</a> IERC1363Errors</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/IERC1363Errors.sol" target="_blank" rel="noopener noreferrer">IERC1363Errors.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Interface of the ERC-1363 custom errors following the <a href="https://eips.ethereum.org/EIPS/eip-6093" target="_blank" rel="noopener noreferrer">ERC-6093<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> rationale.</p> <h3 id="erc1363"><a href="#erc1363" class="header-anchor">#</a> ERC1363</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/ERC1363.sol" target="_blank" rel="noopener noreferrer">ERC1363.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Implementation of the ERC-1363 interface.</p> <p>The reference implementation of ERC-1363 that extends ERC-20 and adds support for executing code after transfers and approvals on recipient contracts.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p><code>transferAndCall</code>, <code>transferFromAndCall</code> and <code>approveAndCall</code> revert if the recipient/spender is an EOA address. To transfer tokens to an EOA or approve it to spend tokens, use the ERC-20 <code>transfer</code>, <code>transferFrom</code> or <code>approve</code> methods.</p></div> <h2 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h2> <div class="custom-block warning"><p class="custom-block-title">IMPORTANT</p> <p>The example contracts are for testing purpose only. When inheriting or copying from these contracts, you must include a way to use the received tokens, otherwise they will be stuck into the contract.</p></div> <h3 id="erc1363guardian"><a href="#erc1363guardian" class="header-anchor">#</a> ERC1363Guardian</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/examples/ERC1363Guardian.sol" target="_blank" rel="noopener noreferrer">ERC1363Guardian.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>As example: a contract that allows to accept ERC-1363 callbacks after transfers or approvals.</p> <p>It emits a <code>TokensReceived</code> event to notify the transfer received by the contract.</p> <p>It also implements a <code>_transferReceived</code> function that can be overridden to make your stuff within your contract after a <code>onTransferReceived</code>.</p> <p>It emits a <code>TokensApproved</code> event to notify the approval received by the contract.</p> <p>It also implements a <code>_approvalReceived</code> function that can be overridden to make your stuff within your contract after a <code>onApprovalReceived</code>.</p> <h3 id="erc1363methodcallreceiver"><a href="#erc1363methodcallreceiver" class="header-anchor">#</a> ERC1363MethodCallReceiver</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/examples/ERC1363MethodCallReceiver.sol" target="_blank" rel="noopener noreferrer">ERC1363MethodCallReceiver.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>As example: a contract that allows to test passing methods via abi encoded function call.</p> <p>It executes the method passed via <code>data</code>. Methods emit a <code>MethodCall</code> event.</p> <h2 id="documentation"><a href="#documentation" class="header-anchor">#</a> Documentation</h2> <ul><li><a href="https://github.com/vittominacori/erc1363-payable-token/tree/master/docs/index.md" target="_blank" rel="noopener noreferrer">Solidity API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="code-analysis"><a href="#code-analysis" class="header-anchor">#</a> Code Analysis</h2> <ul><li><a href="https://raw.githubusercontent.com/vittominacori/erc1363-payable-token/master/analysis/control-flow/ERC1363.png" target="_blank" rel="noopener noreferrer">Control Flow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/analysis/description-table/ERC1363.md" target="_blank" rel="noopener noreferrer">Description Table<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://raw.githubusercontent.com/vittominacori/erc1363-payable-token/master/analysis/inheritance-tree/ERC1363.png" target="_blank" rel="noopener noreferrer">Inheritance Tree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://raw.githubusercontent.com/vittominacori/erc1363-payable-token/master/analysis/uml/ERC1363.svg" target="_blank" rel="noopener noreferrer">UML<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="development"><a href="#development" class="header-anchor">#</a> Development</h2> <h3 id="install-dependencies"><a href="#install-dependencies" class="header-anchor">#</a> Install dependencies</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><h3 id="compile"><a href="#compile" class="header-anchor">#</a> Compile</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run compile
</code></pre></div><h3 id="test"><a href="#test" class="header-anchor">#</a> Test</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token builtin class-name">test</span>
</code></pre></div><h3 id="code-coverage"><a href="#code-coverage" class="header-anchor">#</a> Code Coverage</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run coverage
</code></pre></div><h3 id="linter"><a href="#linter" class="header-anchor">#</a> Linter</h3> <p>Check Solidity files</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run lint:sol
</code></pre></div><p>Check JS/TS files</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run lint:js
</code></pre></div><p>Fix JS and Solidity files</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run lint:fix
</code></pre></div><h2 id="license"><a href="#license" class="header-anchor">#</a> License</h2> <p>Code released under the <a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">MIT License<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/erc1363-payable-token/assets/js/app.c808356c.js" defer></script><script src="/erc1363-payable-token/assets/js/2.4708ce91.js" defer></script><script src="/erc1363-payable-token/assets/js/1.eab45b48.js" defer></script><script src="/erc1363-payable-token/assets/js/22.7a7383be.js" defer></script>
  </body>
</html>
