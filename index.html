<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ERC-1363 Payable Token | An ERC-20 token that can be used for payments</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/erc1363-payable-token/favicon.ico">
    <meta name="description" content="The ERC-1363 is an ERC-20 compatible token that can make a callback on the receiver contract to notify token transfers or token approvals">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vittominacori.github.io/erc1363-payable-token">
    <meta property="og:image" content="https://vittominacori.github.io/erc1363-payable-token/assets/images/erc1363-payable-token.jpg">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="https://vittominacori.github.io/erc1363-payable-token/assets/images/erc1363-payable-token.jpg">
    <meta property="twitter:title" content="ERC-1363 Payable Token | An ERC-20 token that can be used for payments">
    
    <link rel="preload" href="/erc1363-payable-token/assets/css/0.styles.0b37a6eb.css" as="style"><link rel="preload" href="/erc1363-payable-token/assets/js/app.af001ecf.js" as="script"><link rel="preload" href="/erc1363-payable-token/assets/js/2.980f3844.js" as="script"><link rel="preload" href="/erc1363-payable-token/assets/js/7.d2bb94fb.js" as="script"><link rel="prefetch" href="/erc1363-payable-token/assets/js/3.b45719d3.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/4.47d9a46a.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/5.dc67d2f8.js"><link rel="prefetch" href="/erc1363-payable-token/assets/js/6.4d41e4ec.js">
    <link rel="stylesheet" href="/erc1363-payable-token/assets/css/0.styles.0b37a6eb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/erc1363-payable-token/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">An ERC-20 token that can be used for payments</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/vittominacori/erc1363-payable-token" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/vittominacori/erc1363-payable-token" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ERC-1363 Payable Token</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/erc1363-payable-token/#abstract" class="sidebar-link">Abstract</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#install" class="sidebar-link">Install</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#usage" class="sidebar-link">Usage</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#code" class="sidebar-link">Code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#ierc1363" class="sidebar-link">IERC1363</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#erc1363" class="sidebar-link">ERC1363</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#ierc1363receiver" class="sidebar-link">IERC1363Receiver</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#ierc1363spender" class="sidebar-link">IERC1363Spender</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#erc1363payable" class="sidebar-link">ERC1363Payable</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#erc1363payablecrowdsale" class="sidebar-link">ERC1363PayableCrowdsale</a></li></ul></li><li><a href="/erc1363-payable-token/#code-analysis" class="sidebar-link">Code Analysis</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erc1363-payable-token/#development" class="sidebar-link">Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#install-dependencies" class="sidebar-link">Install dependencies</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#usage-using-hardhat" class="sidebar-link">Usage (using Hardhat)</a></li><li class="sidebar-sub-header"><a href="/erc1363-payable-token/#linter" class="sidebar-link">Linter</a></li></ul></li><li><a href="/erc1363-payable-token/#license" class="sidebar-link">License</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="erc-1363-payable-token"><a href="#erc-1363-payable-token" class="header-anchor">#</a> ERC-1363 Payable Token</h1> <p><a href="https://www.npmjs.org/package/erc-payable-token" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/erc-payable-token.svg?style=flat-square" alt="NPM Package"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/vittominacori/erc1363-payable-token/actions/workflows/ci.yml" target="_blank" rel="noopener noreferrer"><img src="https://github.com/vittominacori/erc1363-payable-token/actions/workflows/ci.yml/badge.svg" alt="CI"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://coveralls.io/github/vittominacori/erc1363-payable-token?branch=master" target="_blank" rel="noopener noreferrer"><img src="https://coveralls.io/repos/github/vittominacori/erc1363-payable-token/badge.svg?branch=master" alt="Coverage Status"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/LICENSE" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/license/vittominacori/erc1363-payable-token.svg" alt="MIT licensed"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ERC-1363 allows to implement an ERC-20 smart token.</p> <p>It means that we can add a callback after transferring or approving tokens to be executed.</p> <p>This is an implementation of the <a href="https://eips.ethereum.org/EIPS/eip-1363" target="_blank" rel="noopener noreferrer">EIP-1363 Payable Token<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that defines a token interface for EIP-20 tokens that supports executing recipient contract code after <code>transfer</code> or <code>transferFrom</code>, or spender contract code after <code>approve</code> in a single transaction.</p> <h2 id="abstract"><a href="#abstract" class="header-anchor">#</a> Abstract</h2> <p>There is no way to execute any code on a receiver or spender contract after an EIP-20 <code>transfer</code>, <code>transferFrom</code> or <code>approve</code> so, to make an action, it is required to send another transaction.</p> <p>This introduces complexity on UI development and friction on adoption because users must wait for the first transaction to be executed and then send the second one. They must also pay GAS twice.</p> <p>This proposal aims to make tokens capable of performing actions more easily and working without the use of any other listener.
It allows to make a callback on a receiver or spender contract, after a transfer or an approval, in a single transaction.</p> <p>There are many proposed uses of Ethereum smart contracts that can accept EIP-20 callbacks.</p> <p>Examples could be</p> <ul><li>to create a token payable crowdsale</li> <li>selling services for tokens</li> <li>paying invoices</li> <li>making subscriptions</li></ul> <p>For these reasons it was originally named <strong>&quot;Payable Token&quot;</strong>.</p> <p>Anyway you can use it for specific utilities or for any other purposes who require the execution of a callback after a transfer or approval received.</p> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> erc-payable-token
</code></pre></div><h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.0</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">&quot;erc-payable-token/contracts/token/ERC1363/ERC1363.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">MyToken</span> <span class="token keyword">is</span> ERC1363 <span class="token punctuation">{</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> name<span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token keyword">memory</span> symbol<span class="token punctuation">)</span> <span class="token function">ERC20</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// your stuff</span>
    <span class="token punctuation">}</span>

  <span class="token comment">// your stuff</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="code"><a href="#code" class="header-anchor">#</a> Code</h2> <p>This repo contains:</p> <h3 id="ierc1363"><a href="#ierc1363" class="header-anchor">#</a> IERC1363</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/IERC1363.sol" target="_blank" rel="noopener noreferrer">IERC1363.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Interface for a Payable Token contract as defined in <a href="https://eips.ethereum.org/EIPS/eip-1363" target="_blank" rel="noopener noreferrer">EIP-1363 Payable Token<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">interface</span> <span class="token class-name">IERC1363</span> <span class="token keyword">is</span> IERC20<span class="token punctuation">,</span> IERC165 <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">transferAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">transferAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">transferFromAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">from</span><span class="token punctuation">,</span> <span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">transferFromAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">from</span><span class="token punctuation">,</span> <span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">approveAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> spender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">approveAndCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> spender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="erc1363"><a href="#erc1363" class="header-anchor">#</a> ERC1363</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/ERC1363.sol" target="_blank" rel="noopener noreferrer">ERC1363.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Implementation of an IERC1363 interface.</p> <h3 id="ierc1363receiver"><a href="#ierc1363receiver" class="header-anchor">#</a> IERC1363Receiver</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/IERC1363Receiver.sol" target="_blank" rel="noopener noreferrer">IERC1363Receiver.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Interface for any contract that wants to support <code>transferAndCall</code> or <code>transferFromAndCall</code> from ERC1363 token contracts.</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">interface</span> <span class="token class-name">IERC1363Receiver</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">onTransferReceived</span><span class="token punctuation">(</span><span class="token builtin">address</span> spender<span class="token punctuation">,</span> <span class="token builtin">address</span> sender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ierc1363spender"><a href="#ierc1363spender" class="header-anchor">#</a> IERC1363Spender</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/token/ERC1363/IERC1363Spender.sol" target="_blank" rel="noopener noreferrer">IERC1363Spender.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Interface for any contract that wants to support <code>approveAndCall</code> from ERC1363 token contracts.</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">interface</span> <span class="token class-name">IERC1363Spender</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">onApprovalReceived</span><span class="token punctuation">(</span><span class="token builtin">address</span> sender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">calldata</span> data<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="erc1363payable"><a href="#erc1363payable" class="header-anchor">#</a> ERC1363Payable</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/payment/ERC1363Payable.sol" target="_blank" rel="noopener noreferrer">ERC1363Payable.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Implementation proposal of a contract that wants to accept ERC1363 payments. It intercepts what is the ERC1363 token desired for payments and throws if another is sent.</p> <p>It emits a <code>TokensReceived</code> event to notify the transfer received by the contract.</p> <p>It also implements a <code>transferReceived</code> function that can be overridden to make your stuffs within your contract after a <code>onTransferReceived</code>.</p> <p>It emits a <code>TokensApproved</code> event to notify the approval received by the contract.</p> <p>It also implements a <code>approvalReceived</code> function that can be overridden to make your stuffs within your contract after a <code>onApprovalReceived</code>.</p> <h3 id="erc1363payablecrowdsale"><a href="#erc1363payablecrowdsale" class="header-anchor">#</a> ERC1363PayableCrowdsale</h3> <p><a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/contracts/examples/ERC1363PayableCrowdsale.sol" target="_blank" rel="noopener noreferrer">ERC1363PayableCrowdsale.sol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>As example: an Implementation of a classic token Crowdsale, but paid with ERC1363 tokens instead of ETH.</p> <h2 id="code-analysis"><a href="#code-analysis" class="header-anchor">#</a> Code Analysis</h2> <ul><li><a href="https://raw.githubusercontent.com/vittominacori/erc1363-payable-token/master/analysis/control-flow/ERC1363.png" target="_blank" rel="noopener noreferrer">Control Flow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://raw.githubusercontent.com/vittominacori/erc1363-payable-token/master/analysis/inheritance-tree/ERC1363.png" target="_blank" rel="noopener noreferrer">Inheritance Tree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://raw.githubusercontent.com/vittominacori/erc1363-payable-token/master/analysis/uml/ERC1363.svg" target="_blank" rel="noopener noreferrer">UML<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="development"><a href="#development" class="header-anchor">#</a> Development</h2> <h3 id="install-dependencies"><a href="#install-dependencies" class="header-anchor">#</a> Install dependencies</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><h3 id="usage-using-hardhat"><a href="#usage-using-hardhat" class="header-anchor">#</a> Usage (using Hardhat)</h3> <p>Open the console</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run console
</code></pre></div><h4 id="compile"><a href="#compile" class="header-anchor">#</a> Compile</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run compile
</code></pre></div><h4 id="test"><a href="#test" class="header-anchor">#</a> Test</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token builtin class-name">test</span>
</code></pre></div><h4 id="code-coverage"><a href="#code-coverage" class="header-anchor">#</a> Code Coverage</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run coverage
</code></pre></div><h3 id="linter"><a href="#linter" class="header-anchor">#</a> Linter</h3> <p>Check Solidity files</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run lint:sol
</code></pre></div><p>Check JS/TS files</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run lint:js
</code></pre></div><p>Fix JS and Solidity files</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run lint:fix
</code></pre></div><h2 id="license"><a href="#license" class="header-anchor">#</a> License</h2> <p>Code released under the <a href="https://github.com/vittominacori/erc1363-payable-token/blob/master/LICENSE" target="_blank" rel="noopener noreferrer">MIT License<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/erc1363-payable-token/assets/js/app.af001ecf.js" defer></script><script src="/erc1363-payable-token/assets/js/2.980f3844.js" defer></script><script src="/erc1363-payable-token/assets/js/7.d2bb94fb.js" defer></script>
  </body>
</html>
